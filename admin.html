<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ëŒ€ì¶œëœë“œ - ê´€ë¦¬ì ê´‘ê³  ë“±ë¡</title>
    <style>
        body { font-family: 'Malgun Gothic', sans-serif; background: #f8f9fa; padding: 20px; color: #333; }
        .admin-box { max-width: 700px; margin: 0 auto; background: white; padding: 30px; border-radius: 15px; box-shadow: 0 5px 20px rgba(0,0,0,0.1); }
        h2 { text-align: center; color: #007bff; margin-bottom: 30px; }
        .section { margin-bottom: 25px; border-bottom: 1px solid #eee; padding-bottom: 15px; }
        .section h3 { font-size: 18px; color: #555; margin-bottom: 15px; border-left: 4px solid #007bff; padding-left: 10px; }
        label { display: block; font-size: 13px; color: #666; margin-bottom: 5px; margin-top: 10px; }
        input, textarea { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; font-size: 14px; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        #saveBtn { width: 100%; padding: 15px; background: #007bff; color: white; border: none; border-radius: 8px; font-size: 18px; font-weight: bold; cursor: pointer; margin-top: 20px; transition: 0.3s; }
        #saveBtn:hover { background: #0056b3; }
    </style>
</head>
<body>
<div style="text-align: right; margin-bottom: 10px; margin-right: 15px;">
    <a href="advertise_list.html" style="padding: 10px 15px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; text-decoration: none; margin-left: 10px;">
        ê´‘ê³ ë¬¸ì˜ í™•ì¸
    </a>
    <a href="listing_management.html" style="padding: 10px 15px; background: #28a745; color: white; border: none; border-radius: 5px; cursor: pointer; text-decoration: none;">
        ë¦¬ìŠ¤íŒ… ê´€ë¦¬
    </a>
</div>

<div class="admin-box">
    <h2>ğŸš€ ê´‘ê³ ì‚¬ì´íŠ¸ ìƒì„¸ ë“±ë¡</h2>

    <div class="section">
        <label>ë©”ì¸ ê´‘ê³  ì œëª©</label>
        <input type="text" id="title" placeholder="ì˜ˆ: ë¬´ì§ì ì €ì‹ ìš© ë‹¹ì¼ì…ê¸ˆ ê°€ëŠ¥">
    </div>

    <div class="section">
        <h3>ğŸ¢ ì—…ì²´ì •ë³´</h3>
        <label>ì—…ì²´ëª…</label>
        <input type="text" id="companyName" placeholder="ì—…ì²´ëª… ì…ë ¥">
        <label>ì—°ë½ì²˜</label>
        <input type="text" id="phone" placeholder="010-0000-0000">
        <label>ë“±ë¡ë²ˆí˜¸</label>
        <input type="text" id="regNumber" placeholder="ëŒ€ë¶€ì—… ë“±ë¡ë²ˆí˜¸">
        <label>ë“±ë¡ê¸°ê´€</label>
        <input type="text" id="agency" placeholder="ì˜ˆ: ì„œìš¸ ê°•ë‚¨êµ¬ì²­">
        <label>ì˜ì—…ì†Œ ì£¼ì†Œ</label>
        <input type="text" id="address" placeholder="ì „ì²´ ì£¼ì†Œ ì…ë ¥">
    </div>

    <div class="section">
        <h3>ğŸ’° ìƒí’ˆì •ë³´</h3>
        <div class="grid">
            <div><label>ì›” ê¸ˆë¦¬</label><input type="text" id="monthlyRate" placeholder="ì—° 1.6% ì´ë‚´"></div>
            <div><label>ì—° ê¸ˆë¦¬</label><input type="text" id="yearlyRate" placeholder="ì—° 20% ì´ë‚´"></div>
            <div><label>ëŒ€ì¶œí•œë„</label><input type="text" id="limit" placeholder="ìµœëŒ€ 5,000ë§Œì›"></div>
            <div><label>ìƒí™˜ë°©ì‹</label><input type="text" id="repayment" placeholder="ì›ë¦¬ê¸ˆê· ë“±ìƒí™˜"></div>
            <div><label>ìƒí™˜ê¸°ê°„</label><input type="text" id="period" placeholder="ìµœëŒ€ 60ê°œì›”"></div>
            <div><label>ì—°ì²´ê¸ˆë¦¬</label><input type="text" id="overdueRate" placeholder="ì•½ì •ê¸ˆë¦¬ + 3%"></div>
            <div><label>ì¶”ê°€ë¹„ìš©</label><input type="text" id="extraFee" placeholder="ì—†ìŒ"></div>
            <div><label>ì¤‘ë„ìƒí™˜ìˆ˜ìˆ˜ë£Œ</label><input type="text" id="prepayFee" placeholder="ì—†ìŒ"></div>
        </div>
        <label for="region">ê°€ëŠ¥ ì§€ì—­</label>
        <select id="region" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; font-size: 14px;">
            <option value="ì „êµ­">ì „êµ­</option>
            <option value="ì„œìš¸">ì„œìš¸</option>
            <option value="ê²½ê¸°">ê²½ê¸°</option>
            <option value="ì¸ì²œ">ì¸ì²œ</option>
            <option value="ë¶€ì‚°">ë¶€ì‚°</option>
            <option value="ëŒ€êµ¬">ëŒ€êµ¬</option>
            <option value="ê´‘ì£¼">ê´‘ì£¼</option>
            <option value="ëŒ€ì „">ëŒ€ì „</option>
        </select>

        <label for="loanType" style="margin-top: 15px;">ìƒí’ˆ ì¢…ë¥˜</label>
        <select id="loanType" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; font-size: 14px;">
            <option value="ì†Œì•¡ëŒ€ì¶œ">ì†Œì•¡ëŒ€ì¶œ</option>
            <option value="ì§ì¥ì¸">ì§ì¥ì¸</option>
            <option value="ì‚¬ì—…ì">ì‚¬ì—…ì</option>
            <option value="ì €ì‹ ìš©">ì €ì‹ ìš©</option>
            <option value="ë‹¹ì¼ëŒ€ì¶œ">ë‹¹ì¼ëŒ€ì¶œ</option>
        </select>
    </div>

    <button id="saveBtn">DBì— ê´‘ê³  ë“±ë¡í•˜ê¸°</button>
</div>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.0.0/firebase-app.js";
    import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.0.0/firebase-firestore.js";

    const firebaseConfig = {
        apiKey: "AIzaSyAYd6PZFWAoXDnz80l_1-0EDtkDxAkQFy4",
        authDomain: "laos-project-ff295.firebaseapp.com",
        projectId: "laos-project-ff295",
        storageBucket: "laos-project-ff295.firebasestorage.app",
        messagingSenderId: "7764846397",
        appId: "1:7764846397:web:8977b486e092c0f7d24754",
        measurementId: "G-LMD3B020W7"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    document.getElementById('saveBtn').addEventListener('click', async () => {
        const adData = {
            title: document.getElementById('title').value,
            company_name: document.getElementById('companyName').value,
            reg_number: document.getElementById('regNumber').value,
            phone: document.getElementById('phone').value,
            agency: document.getElementById('agency').value,
            address: document.getElementById('address').value,
            monthly_rate: document.getElementById('monthlyRate').value,
            yearly_rate: document.getElementById('yearlyRate').value,
            limit: document.getElementById('limit').value,
            repayment: document.getElementById('repayment').value,
            period: document.getElementById('period').value,
            overdue_rate: document.getElementById('overdueRate').value,
            extra_fee: document.getElementById('extraFee').value,
            prepay_fee: document.getElementById('prepayFee').value,
            region: document.getElementById('region').value,
            loan_type: document.getElementById('loanType').value,
            created_at: new Date()
        };

        try {
            const docRef = await addDoc(collection(db, "ads"), adData);
            alert("âœ… ê´‘ê³ ê°€ ì„±ê³µì ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!");
            window.location.reload(); 
        } catch (e) {
            console.error("ì‹¤íŒ¨ ì›ì¸: ", e);
            alert("âŒ ë“±ë¡ ì‹¤íŒ¨! ê·œì¹™(Rules) ì„¤ì •ì„ í™•ì¸í•˜ì„¸ìš”.");
        }
    });
</script>

</body>
</html>